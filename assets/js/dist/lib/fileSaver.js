/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */

var saveAs=saveAs||function(e){"use strict";if(typeof navigator!="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent))return;var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in r,s=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},o=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),u=e.webkitRequestFileSystem,a=e.requestFileSystem||u||e.mozRequestFileSystem,f=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},l="application/octet-stream",c=0,h=500,p=function(t){var r=function(){typeof t=="string"?n().revokeObjectURL(t):t.remove()};e.chrome?r():setTimeout(r,h)},d=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var i=e["on"+t[r]];if(typeof i=="function")try{i.call(e,n||e)}catch(s){f(s)}}},v=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["ï»¿",e],{type:e.type}):e},m=function(t,f,h){h||(t=v(t));var m=this,g=t.type,y=!1,b,w,E=function(){d(m,"writestart progress write writeend".split(" "))},S=function(){if(w&&o&&typeof FileReader!="undefined"){var r=new FileReader;r.onloadend=function(){var e=r.result;w.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),m.readyState=m.DONE,E()},r.readAsDataURL(t),m.readyState=m.INIT;return}if(y||!b)b=n().createObjectURL(t);if(w)w.location.href=b;else{var i=e.open(b,"_blank");i==undefined&&o&&(e.location.href=b)}m.readyState=m.DONE,E(),p(b)},x=function(e){return function(){if(m.readyState!==m.DONE)return e.apply(this,arguments)}},T={create:!0,exclusive:!1},N;m.readyState=m.INIT,f||(f="download");if(i){b=n().createObjectURL(t),setTimeout(function(){r.href=b,r.download=f,s(r),E(),p(b),m.readyState=m.DONE});return}e.chrome&&g&&g!==l&&(N=t.slice||t.webkitSlice,t=N.call(t,0,t.size,l),y=!0),u&&f!=="download"&&(f+=".download");if(g===l||u)w=e;if(!a){S();return}c+=t.size,a(e.TEMPORARY,c,x(function(e){e.root.getDirectory("saved",T,x(function(e){var n=function(){e.getFile(f,T,x(function(e){e.createWriter(x(function(n){n.onwriteend=function(t){w.location.href=e.toURL(),m.readyState=m.DONE,d(m,"writeend",t),p(e)},n.onerror=function(){var e=n.error;e.code!==e.ABORT_ERR&&S()},"writestart progress write abort".split(" ").forEach(function(e){n["on"+e]=m["on"+e]}),n.write(t),m.abort=function(){n.abort(),m.readyState=m.DONE},m.readyState=m.WRITING}),S)}),S)};e.getFile(f,{create:!1},x(function(e){e.remove(),n()}),x(function(e){e.code===e.NOT_FOUND_ERR?n():S()}))}),S)}),S)},g=m.prototype,y=function(e,t,n){return new m(e,t,n)};return typeof navigator!="undefined"&&navigator.msSaveOrOpenBlob?function(e,t,n){return n||(e=v(e)),navigator.msSaveOrOpenBlob(e,t||"download")}:(g.abort=function(){var e=this;e.readyState=e.DONE,d(e,"abort")},g.readyState=g.INIT=0,g.WRITING=1,g.DONE=2,g.error=g.onwritestart=g.onprogress=g.onwrite=g.onabort=g.onerror=g.onwriteend=null,y)}(typeof self!="undefined"&&self||typeof window!="undefined"&&window||this.content);typeof module!="undefined"&&module.exports?module.exports.saveAs=saveAs:typeof define!="undefined"&&define!==null&&define.amd!=null&&define([],function(){return saveAs});