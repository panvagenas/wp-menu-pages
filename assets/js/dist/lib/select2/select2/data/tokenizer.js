define(["jquery"],function(e){function t(e,t,n){var r=n.get("tokenizer");r!==undefined&&(this.tokenizer=r),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(e,t,n){function i(e){r.trigger("select",{data:e})}var r=this;t.term=t.term||"";var s=this.tokenizer(t,this.options,i);s.term!==t.term&&(this.$search.length&&(this.$search.val(s.term),this.$search.focus()),t.term=s.term),e.call(this,t,n)},t.prototype.tokenizer=function(t,n,r,i){var s=r.get("tokenSeparators")||[],o=n.term,u=0,a=this.createTag||function(e){return{id:e.term,text:e.term}};while(u<o.length){var f=o[u];if(e.inArray(f,s)===-1){u++;continue}var l=o.substr(0,u),c=e.extend({},n,{term:l}),h=a(c);if(h==null){u++;continue}i(h),o=o.substr(u+1)||"",u=0}return{term:o}},t});