define(["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L){function A(){this.reset()}A.prototype.apply=function(c){c=e.extend({},this.defaults,c);if(c.dataAdapter==null){c.ajax!=null?c.dataAdapter=d:c.data!=null?c.dataAdapter=p:c.dataAdapter=h,c.minimumInputLength>0&&(c.dataAdapter=f.Decorate(c.dataAdapter,g)),c.maximumInputLength>0&&(c.dataAdapter=f.Decorate(c.dataAdapter,y)),c.maximumSelectionLength>0&&(c.dataAdapter=f.Decorate(c.dataAdapter,b)),c.tags&&(c.dataAdapter=f.Decorate(c.dataAdapter,v));if(c.tokenSeparators!=null||c.tokenizer!=null)c.dataAdapter=f.Decorate(c.dataAdapter,m);if(c.query!=null){var L=t(c.amdBase+"compat/query");c.dataAdapter=f.Decorate(c.dataAdapter,L)}if(c.initSelection!=null){var A=t(c.amdBase+"compat/initSelection");c.dataAdapter=f.Decorate(c.dataAdapter,A)}}c.resultsAdapter==null&&(c.resultsAdapter=n,c.ajax!=null&&(c.resultsAdapter=f.Decorate(c.resultsAdapter,x)),c.placeholder!=null&&(c.resultsAdapter=f.Decorate(c.resultsAdapter,S)),c.selectOnClose&&(c.resultsAdapter=f.Decorate(c.resultsAdapter,C)));if(c.dropdownAdapter==null){if(c.multiple)c.dropdownAdapter=w;else{var O=f.Decorate(w,E);c.dropdownAdapter=O}c.minimumResultsForSearch!==0&&(c.dropdownAdapter=f.Decorate(c.dropdownAdapter,N)),c.closeOnSelect&&(c.dropdownAdapter=f.Decorate(c.dropdownAdapter,k));if(c.dropdownCssClass!=null||c.dropdownCss!=null||c.adaptDropdownCssClass!=null){var M=t(c.amdBase+"compat/dropdownCss");c.dropdownAdapter=f.Decorate(c.dropdownAdapter,M)}c.dropdownAdapter=f.Decorate(c.dropdownAdapter,T)}if(c.selectionAdapter==null){c.multiple?c.selectionAdapter=i:c.selectionAdapter=r,c.placeholder!=null&&(c.selectionAdapter=f.Decorate(c.selectionAdapter,s)),c.allowClear&&(c.selectionAdapter=f.Decorate(c.selectionAdapter,o)),c.multiple&&(c.selectionAdapter=f.Decorate(c.selectionAdapter,u));if(c.containerCssClass!=null||c.containerCss!=null||c.adaptContainerCssClass!=null){var _=t(c.amdBase+"compat/containerCss");c.selectionAdapter=f.Decorate(c.selectionAdapter,_)}c.selectionAdapter=f.Decorate(c.selectionAdapter,a)}if(typeof c.language=="string")if(c.language.indexOf("-")>0){var D=c.language.split("-"),P=D[0];c.language=[c.language,P]}else c.language=[c.language];if(e.isArray(c.language)){var H=new l;c.language.push("en");var B=c.language;for(var j=0;j<B.length;j++){var F=B[j],I={};try{I=l.loadPath(F)}catch(q){try{F=this.defaults.amdLanguageBase+F,I=l.loadPath(F)}catch(R){c.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+F+'" could not be '+"automatically loaded. A fallback will be used instead.");continue}}H.extend(I)}c.translations=H}else{var U=l.loadPath(this.defaults.amdLanguageBase+"en"),z=new l(c.language);z.extend(U),c.translations=z}return c},A.prototype.reset=function(){function t(e){function t(e){return c[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(r,i){if(e.trim(r.term)==="")return i;if(i.children&&i.children.length>0){var s=e.extend(!0,{},i);for(var o=i.children.length-1;o>=0;o--){var u=i.children[o],a=n(r,u);a==null&&s.children.splice(o,1)}return s.children.length>0?s:n(r,s)}var f=t(i.text).toUpperCase(),l=t(r.term).toUpperCase();return f.indexOf(l)>-1?i:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:f.escapeMarkup,language:L,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},A.prototype.set=function(t,n){var r=e.camelCase(t),i={};i[r]=n;var s=f._convertData(i);e.extend(this.defaults,s)};var O=new A;return O});